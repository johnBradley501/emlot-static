# A brief introduction to listdispl.js

The `listdispl.js` Javascript file supports the display of the lists of items that appear in the right-hand side of the keyword searching and facetted browsing HTML pages.

* it takes the JSON data generated by the `xxx2json.py` scripts and made available within the static site in the `/db/data` folder (e.g., the file `ks-events.js` as the source for the display information.
* the keyword searching and facetted browsing processes will select items from the complete list of data and create a list of selected items (from the full list in the ks file) which can also be displayed by the code in `listdispl.js`.  In this way, the same code can be used not only for the full display of all items, but also for the selected subset.
* The code in listdispl.js also manages the pagination display of a list of data: not only splitting the data up into 50 item chunks, but also creating both the navigation buttons that allow the user to move between these chunks and the label text that tells the user which block is being displayed.

## The data-to-HTML Table Row process
The list of items is displayed in the a table, and the columns for that table are different for different types of items (events, persons, troupes, etc).  Thus, the code to actually take each item data and turn that into an HTML table row for display must vary too.  This is handled by creating a function which does this data-to-HTML work and is held in the particular HTML page for each item type so that, say, the function to display events can be different from that used to display troupes.  The specific function for a particular type of data is given to `listdispl.js` via its `defineRowFunction(funct)` function, which must be invoked as part of the setup operations within the particular HTML page.

One of the jobs for this data-to-HTML function is to convert a list of IDs for associated persons, troupes and venues into a list of HTML links that show the entity's name (person name, troupe name or venue name) as a link to the relevent HTML page for that entity.  It was convenient to put the code that performs this translation into `listdispl.js` as well so that it can be shared between the different displays.  For example, `listdispl.js`'s function `displayPersonList(personIDs)` does the job for persons and can be invoked if needed in the data-to-HTML function mentioned in the previous paragraph.  There are three functions in `listdisplay.js`: to handle lists of persons, lists of troupes and lists of events.
* The data needed by these functions to provide, for each ID, a name to display is provided in a separate Javascript file in the data area called `pvtdata.js`, and thus this file needs to be included in any HTML files that uses `listdispl.js`.
* `pvtdata.js` is generated by the python script `EmLOTNames.py`.
