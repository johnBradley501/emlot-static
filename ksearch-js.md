# A brief introduction to ksearch.js
The `jsearch.js` Javascript files holds the code that manages the keyword searching function.  The actual search itself is carried out using the [fuse engine](https://www.fusejs.io/).

The functionality is very simple and requirees only two functions:
* `setup()` stores the major pieces of data that will actually be required for the search.  Among them is the setting up of the fuse engine.  In this regard, note in particular the parameter `itemNo` which specifies the position in each item in the set of search data one will find the text to be searched.  With this information Fuse can be set up using its `getFn` parameter which tells it where to get its search data from.
* `doquerying()` is invoked when the user pushes the button in beside the text searching box to ask for the search to be carried out.  This function gets the query text and invokes fuse with it.  Fuse will return a list of items containing the items it selected.  Each selected item is collected into another list in a form suitable for the code in `listdispl.js` to handle, and its function `showData()` is called to display this list of results in the right-hand area.

## Files needed for ksearch.js
`ksearch.js` is used in a keyword search HTML page and needs the following Javascript pages containing the information it needs loaded with it (from db/data):
* One of the "ks Javascript files" (for example, for the keyword searching of events, the `ks-events.js` file) must be present. This provides the data for the keyword search plus material that can generate the list of  items that appears in the right-side of the browse HTML page, and is generated by `listdispl.js`.
* Although not directly needed by ksearch.js itself, the `ptvdata.js` file should also be made available, since it is often needed for the generation of tabular display of selected items that `listdispl.js` creates.

It also refers to the functions in `listdispl.js` (in folder `db/js`) to cause the materials it selects to be displayed.
